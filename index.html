<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire de Déclaration de Location - Résidence Aqua Resort</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-building"></i>
            </div>
            <h1>FORMULAIRE DE DÉCLARATION DE LOCATION</h1>
            <div class="subtitle">
                À remplir obligatoirement pour chaque séjour de locataires dans un appartement. 
                Ce formulaire doit être validé et imprimé, puis présenté à la caisse du Syndic pour règlement.
            </div>
        </header>
        
        <div class="form-instructions">
            <i class="fas fa-info-circle"></i>
            Tous les champs marqués d'un astérisque (*) sont obligatoires
        </div>
        
        <div class="form-container">
            <form id="rentalForm" netlify>
                <!-- Section 1: Déclarant Identity -->
                <div class="form-section">
                    <h2>IDENTITÉ DU DÉCLARANT</h2>
                    <div class="form-group">
                        <div class="form-column">
                            <label for="declarantType" class="required">Je remplis ce formulaire en tant que</label>
                            <select id="declarantType" >
                                <option value="">Sélectionnez une option</option>
                                <option value="owner">Propriétaire</option>
                                <option value="agency">Agence</option>
                                <option value="representative">Représentant</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="fullName" class="required">Nom & Prénom</label>
                            <input type="text" id="fullName" >
                        </div>
                        <div class="form-column">
                            <label for="phone" class="required">Téléphone</label>
                            <input type="tel" id="phone" >
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="email" class="required">Adresse e-mail</label>
                            <input type="email" id="email" >
                        </div>
                        <div class="form-column">
                            <label for="cin" class="required">N° CIN / Passeport</label>
                            <input type="text" id="cin" >
                        </div>
                    </div>
                </div>
                
                <!-- Section 2: Appartement Concerné -->
                <div class="form-section">
                    <h2>APPARTEMENT CONCERNÉ</h2>
                    <div class="form-group">
                        <div class="form-column">
                            <label for="block" class="required">Bloc</label>
                            <input type="text" id="block" >
                        </div>
                        <div class="form-column">
                            <label for="apartmentNumber" class="required">Appartement n°</label>
                            <input type="text" id="apartmentNumber" >
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="apartmentType" class="required">Type d'appartement</label>
                            <select id="apartmentType" required onchange="calculateFees()">
                                <option value="">Sélectionnez un type</option>
                                <option value="s0">S+0</option>
                                <option value="s1">S+1</option>
                                <option value="s2">S+2</option>
                                <option value="s3">S+3</option>
                                <option value="other">Autre</option>
                            </select>
                        </div>
                        <div class="form-column" id="otherTypeContainer" style="display: none;">
                            <label for="otherType">Si autre type d'appartement</label>
                            <input type="text" id="otherType">
                        </div>
                    </div>
                </div>
                
                <!-- Section 3: Locataire Principal -->
                <div class="form-section">
                    <h2>IDENTITÉ DU LOCATAIRE PRINCIPAL</h2>
                    <div class="form-group">
                        <div class="form-column">
                            <label for="tenantName" class="required">Nom & Prénom</label>
                            <input type="text" id="tenantName" >
                        </div>
                        <div class="form-column">
                            <label for="tenantDob" class="required">Date de naissance</label>
                            <input type="date" id="tenantDob" >
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="nationality" class="required">Nationalité</label>
                            <input type="text" id="nationality" >
                        </div>
                        <div class="form-column">
                            <label for="idType" class="required">Type de document d'identité</label>
                            <select id="idType" >
                                <option value="">Sélectionnez un type</option>
                                <option value="cin">Carte d'identité nationale</option>
                                <option value="passport">Passeport</option>
                                <option value="other">Autre</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="idNumber" class="required">N° de document</label>
                            <input type="text" id="idNumber" >
                        </div>
                    </div>
                </div>
                
                <!-- Section 4: Séjour Information -->
                <div class="form-section">
                    <h2>INFORMATIONS SUR LE SÉJOUR</h2>
                    <div class="form-group">
                        <div class="form-column">
                            <label for="startDate" class="required">Date de début de séjour</label>
                            <input type="date" id="startDate"  onchange="calculateFees()">
                        </div>
                        <div class="form-column">
                            <label for="endDate" class="required">Date de fin de séjour</label>
                            <input type="date" id="endDate"  onchange="calculateFees()">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="adults" class="required">Nombre total d'occupants adultes</label>
                            <input type="number" id="adults" min="1" value="2" required onchange="calculateFees()" onchange="calculateNigts()">
                        </div>
                        <div class="form-column">
                            <label for="children" class="required">Nombre total d'occupants enfants</label>
                            <input type="number" id="children" min="0" value="0"  onchange="calculateNigts()">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label for="bracelets">Nombre de bracelets</label>
                            <input type="number" id="bracelets" min="0" value="0" readonly>
                        </div>
                    </div>
                </div>
                
                <!-- Section 5: Documents -->
                <div class="form-section">
                    <h2>DOCUMENTS À TÉLÉCHARGER</h2>
                    <div class="form-group">
                        <div class="form-column">
                            <label class="required">Copie du CIN ou Passeport des locataires principaux (5 maximum)</label>
                            <div class="file-upload" onclick="document.getElementById('idFile').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Glissez-déposez vos fichiers ici ou cliquez pour parcourir</p>
                                <button type="button" class="btn-upload">Choisir des fichiers</button>
                                <input type="file" id="idFile" class="file-input" multiple>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label>Copie des passeports des autres locataires (si plus de 5)</label>
                            <div class="file-upload" onclick="document.getElementById('additionalIdFile').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Glissez-déposez vos fichiers ici ou cliquez pour parcourir</p>
                                <button type="button" class="btn-upload">Choisir des fichiers</button>
                                <input type="file" id="additionalIdFile" class="file-input" multiple>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section 6: Procuration -->
                <div class="form-section">
                    <h2>PROCURATION</h2>
                    <div class="form-group">
                        <div class="form-column">
                            <label class="required">Procuration du propriétaire à l'agence ou à l'intermédiaire</label>
                            <div class="file-upload" onclick="document.getElementById('procurationFile').click()">
                                <i class="fas fa-file-contract"></i>
                                <p>Télécharger la procuration</p>
                                <button type="button" class="btn-upload">Choisir un fichier</button>
                                <input type="file" id="procurationFile" class="file-input">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-column">
                            <label class="required">Accord du propriétaire</label>
                            <div class="file-upload" onclick="document.getElementById('ownerAgreement').click()">
                                <i class="fas fa-handshake"></i>
                                <p>Télécharger l'accord du propriétaire</p>
                                <button type="button" class="btn-upload">Choisir un fichier</button>
                                <input type="file" id="ownerAgreement" class="file-input">
                            </div>
                        </div>
                        <div class="form-column">
                            <label class="required">CIN ou passeport du déclarant</label>
                            <div class="file-upload" onclick="document.getElementById('declarantId').click()">
                                <i class="fas fa-id-card"></i>
                                <p>Télécharger la pièce d'identité</p>
                                <button type="button" class="btn-upload">Choisir un fichier</button>
                                <input type="file" id="declarantId" class="file-input">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section 7: Frais -->
                <div class="form-section">
                    <h2>FRAIS À RÉGLER</h2>
                    <p>Ces frais sont exigibles <strong>quel que soit le canal de location</strong> (agence ou propriétaire). Ils couvrent la <strong>gestion administrative</strong>, la <strong>sécurité</strong> et les <strong>services généraux</strong> liés à l'accueil des locataires au sein de la <strong>Résidence Aqua Resort.</strong></p>
                    
                    <div class="fees-summary">
                        <div class="fee-item">
                            <span>Frais de dossier fixes (non doublables) :</span>
                            <span id="fixedFee">30 DT</span>
                        </div>
                        <div class="fee-item">
                            <span>Cotisation complémentaire (frais de location) :</span>
                            <span id="variableFee">0 DT</span>
                        </div>
                        <div class="fee-item fee-total">
                            <span>Montant total à régler :</span>
                            <span id="totalFee">30 DT</span>
                        </div>
                    </div>
                    
                    <div class="note">
                        Ce montant est exigible avant l'entrée des locataires.
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Type d'appartement</th>
                                <th>Séjour de 1 à 10 nuitées</th>
                                <th>Séjour de plus de 10 nuitées</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>S+0</td>
                                <td>40 DT</td>
                                <td>80 DT</td>
                            </tr>
                            <tr>
                                <td>S+1</td>
                                <td>60 DT</td>
                                <td>120 DT</td>
                            </tr>
                            <tr>
                                <td>S+2</td>
                                <td>80 DT</td>
                                <td>160 DT</td>
                            </tr>
                            <tr>
                                <td>S+3</td>
                                <td>100 DT</td>
                                <td>200 DT</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Section 8: Regulations and Commitments -->
                <div class="form-section">
                    <h2>RÈGLEMENT INTÉRIEUR ET ENGAGEMENTS</h2>
                    
                    <div class="regulations">
                        <p>Je m'engage à :</p>
                        <div class="regulation-item">Informer mes locataires qu'ils sont tenus de respecter le règlement intérieur de la Résidence</div>
                        <div class="regulation-item">Ne pas accueillir plus de personnes que le nombre autorisé</div>
                        <div class="regulation-item">Éviter toute nuisance sonore ou incivilité</div>
                    </div>
                    
                    <div class="commitment-group">
                        <div class="commitment-item">
                            <input type="checkbox" id="regulationKnowledge" >
                            <label for="regulationKnowledge" class="required">J'ai pris connaissance du règlement intérieur de la Résidence Aqua Resort.</label>
                        </div>
                        <div class="commitment-item">
                            <input type="checkbox" id="informationAccuracy" >
                            <label for="informationAccuracy" class="required">Je certifie l'exactitude des informations fournies.</label>
                        </div>
                        <div class="commitment-item">
                            <input type="checkbox" id="feeCommitment" >
                            <label for="feeCommitment" class="required">Je m'engage à régler les frais dus avant l'entrée des locataires.</label>
                        </div>
                    </div>
                    
                    <h3>Conditions Générales d'Utilisation (CGU) ET Règlement intérieur</h3>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">1. Objet de la plateforme</div>
                        <p>La plateforme numérique est conçue pour <strong>centraliser les échanges entre le Syndic et les parties autorisées</strong> (copropriétaires et intermédiaires mandatés) à des fins administratives. Elle ne sert pas à la diffusion d'annonces locatives.</p>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">2. Accès et utilisateurs autorisés</div>
                        <div class="regulation-item"><strong>Syndic</strong> : accès administrateur</div>
                        <div class="regulation-item"><strong>Copropriétaires</strong> : accès sur demande</div>
                        <div class="regulation-item"><strong>Intermédiaires mandatés</strong> : accès obligatoire via mandat</div>
                        <div class="regulation-item"><strong>Locataires</strong> : aucun accès</div>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">3. Fonctionnalités</div>
                        <div class="regulation-item">Dépôt de documents (procurations, pièces d'identité, demandes d'intervention)</div>
                        <div class="regulation-item">Suivi des dossiers par le Syndic</div>
                        <div class="regulation-item">Archivage numérique</div>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">4. Engagements</div>
                        <p>L'utilisateur s'engage à :</p>
                        <div class="regulation-item">Fournir des informations exactes</div>
                        <div class="regulation-item">Respecter la confidentialité</div>
                        <div class="regulation-item">Ne pas utiliser la plateforme à d'autres fins</div>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">5. Rôle du Syndic</div>
                        <p>Le Syndic reçoit les documents, les classe, valide les accès. Il n'est pas responsable du contenu transmis par les utilisateurs.</p>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">6. Confidentialité et sécurité</div>
                        <p>Les données sont <strong>stockées sur un serveur sécurisé</strong> et accessibles uniquement aux utilisateurs autorisés.</p>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">7. Droit applicable</div>
                        <p>La présente plateforme est régie par le <strong>droit tunisien</strong>. Tout litige relève de la <strong>compétence des tribunaux de Sousse.</strong></p>
                    </div>
                    
                    <div class="regulation-section">
                        <div class="regulation-title">8. Respect du règlement de la résidence et engagements spécifiques</div>
                        <p>Tout <strong>intermédiaire mandaté</strong> (agence, concierge, représentant d'un copropriétaire, etc.) accédant à la plateforme s'engage à :</p>
                        <div class="regulation-item">Respecter le <strong>règlement de copropriété</strong> et le <strong>règlement intérieur</strong> de la Résidence Aqua Resort, en vigueur à la date d'utilisation.</div>
                        <div class="regulation-item">Ne pas porter atteinte à la <strong>tranquillité</strong>, la sécurité ou la propreté des parties communes, ni faciliter de telles atteintes.</div>
                        <div class="regulation-item">Utiliser la plateforme uniquement à des fins administratives autorisées, et dans le cadre strict du mandat.</div>
                        <div class="regulation-item">Reconnaître que toute infraction pourra entraîner : 
                            <div class="sub-steps">
                                <div class="sub-step">La restriction ou suspension de l'accès à la plateforme</div>
                                <div class="sub-step">Une notification au copropriétaire mandant</div>
                                <div class="sub-step">Une transmission du dossier au comité de gestion</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="note">
                        <strong>L'accès à la plateforme n'est pas un droit permanent et n'engage pas la responsabilité du Syndic quant aux actes du mandataire dans la résidence.</strong>
                    </div>
                </div>
                
                <!-- Section 9: Internal Regulations -->
                <div class="form-section">
                    <h2>RÈGLEMENT DE SÉJOUR - RÉSIDENCE AQUA RESORT</h2>
                    <p>Pour garantir la sécurité, la tranquillité et l'hygiène de la Résidence. Ces dispositions s'appliquent à tous les locataires. Le Syndic peut apprécier la gravité de tout manquement et appliquer des mesures disciplinaires.</p>
                    
                    <div class="regulations">
                        <div class="regulation-section">
                            <div class="regulation-title">Interdictions liées à la tranquillité</div>
                            <div class="regulation-item">Recevoir des invités extérieurs dans les appartements loués</div>
                            <div class="regulation-item">Jeux d'enfants dans les couloirs, halls ou escaliers</div>
                            <div class="regulation-item">Consommation d'alcool, chicha ou repas dans les espaces communs</div>
                            <div class="regulation-item">Remplacer ou faire entrer des personnes non inscrites au contrat</div>
                        </div>
                        
                        <div class="regulation-section">
                            <div class="regulation-title">Interdictions liées à l'hygiène et à l'esthétique</div>
                            <div class="regulation-item"><strong>Bracelet d'identification obligatoire pendant toute la durée du séjour</strong></div>
                            <div class="regulation-item">Réservation des transats par objets personnels</div>
                            <div class="regulation-item">Étendre du linge ou serviettes sur balcons et fenêtres</div>
                            <div class="regulation-item">Jeter les déchets ailleurs que dans les conteneurs situés au sous-sol</div>
                            <div class="regulation-item">Salir ou dégrader les parties communes (sable, éclaboussures, etc.)</div>
                        </div>
                        
                        <div class="regulation-section">
                            <div class="regulation-title">Sécurité & responsabilité</div>
                            <div class="regulation-item">Le Syndic décline toute responsabilité en cas de perte d'objets personnels</div>
                            <div class="regulation-item">Accès aux caméras de vidéosurveillance strictement interdit aux locataires</div>
                            <div class="regulation-item">Tout comportement inapproprié, irrespectueux ou dangereux peut entraîner l'expulsion immédiate, sans remboursement</div>
                        </div>
                    </div>
                    
                    <h3>Procédure terrain obligatoire pour finaliser la location</h3>
                    
                    <div class="procedure-steps">
                        <div class="step">
                            Générer le contrat via la plateforme (montant calculé automatiquement)
                        </div>
                        <div class="step">
                            Imprimer deux exemplaires
                        </div>
                        <div class="step">
                            Passage obligatoire chez l'agent terrain, avec le locataire :
                            <div class="sub-steps">
                                <div class="sub-step">Vérification des identités</div>
                                <div class="sub-step">Vérification des pièces du dossier</div>
                            </div>
                        </div>
                        <div class="step">
                            Passage chez le caissier :
                            <div class="sub-steps">
                                <div class="sub-step">Encaissement</div>
                                <div class="sub-step">Remplissage de la case de validation</div>
                                <div class="sub-step">Apposition du cachet et signature</div>
                            </div>
                        </div>
                        <div class="step">
                            Finalisation chez l'agent du syndic :
                            <div class="sub-steps">
                                <div class="sub-step">Enregistrement du contrat dans le système eSyndic</div>
                                <div class="sub-step">Chargement de la période sur la carte RFID</div>
                                <div class="sub-step">Remise des bracelets d'accès au locataire</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section 10: Final Acceptance and Signature -->
                <div class="form-section">
                    <h2>VALIDATION & SIGNATURE ÉLECTRONIQUE</h2>
                    
                    <div class="signature-section">
                        <p><strong>J'accepte les Conditions Générales d'Utilisation et le règlement intérieur</strong></p>
                        
                        <div class="commitment-item" style="margin-top: 20px;">
                            <input type="checkbox" id="acceptTerms" >
                            <label for="acceptTerms" class="required">Je valide et signe ce formulaire de façon électronique.</label>
                        </div>
                        
                        <div class="signature-pad" id="signaturePad">
    <canvas id="signatureCanvas" width="300" height="150" style="border: 1px solid #000;"></canvas>
</div>

                        <button type="button" class="btn-upload" onclick="clearSignature()">Effacer la signature</button>
                        
                        <div class="signature-label">Signature électronique</div>
                        <div class="signature-date">Fait à Monastir, le <span id="currentDate"></span></div>
                    </div>
                </div>
                
                <!-- Submit Section -->
                <div class="btn-container">
                    <button type="button" class="btn btn-reset">
                        <i class="fas fa-redo"></i> Réinitialiser
                    </button>
                    <button type="submit" class="btn btn-submit">
                        <i class="fas fa-check-circle"></i> Soumettre le formulaire
                    </button>
                </div>
                <div id="successMessage" style="display: none; color: green; margin-top: 20px;">
                ✅ Formulaire soumis avec succès ! Veuillez l’imprimer et le présenter à la caisse du Syndic.
                </div>
                <div id="FailedMessage" style="display: none; color: red; margin-top: 20px;">
                ❌ Veuillez remplir tous les champs obligatoires et accepter les conditions.
                </div>
            </form>
        </div>
        
        <footer>
            <p>Résidence Aqua Resort &copy; 2023 | Tous droits réservés</p>
            <p>Formulaire de déclaration de location | Version 2.1</p>
        </footer>
    </div>

    <script src="script.js"></script>

</body>
</html>